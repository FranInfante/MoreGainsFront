<app-back-to-menu></app-back-to-menu>
<div class="d-flex flex-column vh-100">
  <div
    class="tab-content flex-grow-1 d-flex flex-column justify-content-start mt-5"
  >
    <ng-container *ngIf="activePlan; else noPlans">
      <div class="d-flex flex-row align-items-center mx-4">
        <div class="flex-grow-1">
          <h3 class="mt-3 ms-5" style="text-align: center">
            {{ activePlan.name }}
          </h3>
        </div>
        <button
          class="p-2 ms-3 btn"
          type="button"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          <img [src]="ThreeDotsIcon" alt="ThreeDotsIcon" />
        </button>
        <ul class="dropdown-menu">
          <li>
            <a
              class="dropdown-item delete-item"
              data-bs-toggle="modal"
              data-bs-target="#VerificationModal"
              >Delete "{{ activePlan.name }}"</a
            >
          </li>
        </ul>
      </div>
      <app-workouts
        [workouts]="activePlan.workouts"
        [planId]="activePlan.id"
      ></app-workouts>

      <div
        class="modal fade"
        id="VerificationModal"
        tabindex="-1"
        aria-labelledby="VerificationModalLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog px-3 modal-dialog-centered">
          <div class="modal-content bg-dark">
            <div class="modal-body bg-dark rounded text-center">
              Are you sure you want to delete this plan?
            </div>
            <div class="modal-footer bg-dark d-flex justify-content-evenly">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Cancel
              </button>
              <button
                type="button"
                class="btn btn-danger"
                (click)="deletePlan(activePlan.id)"
                data-bs-dismiss="modal"
              >
                Confirm Deletion
              </button>
            </div>
          </div>
        </div>
      </div>
    </ng-container>
    <ng-template #noPlans>
      <div class="no-plans-container">
        <p class="text-center">
          No plans available. Please add a plan to get started.
        </p>
      </div>
    </ng-template>
  </div>

  <div class="fixed-bottom-container">
    <ul class="nav nav-tabs" #navTabs>
      <li class="nav-item" *ngFor="let plan of plans">
        <a
          class="nav-link"
          [class.active]="plan.id === activePlanId"
          (click)="selectPlan(plan.id)"
        >
          {{ plan.name }}
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" (click)="addPlan()"
          ><img [src]="PlusSignIcon" alt="PlusSignIcon" class="w-75 h-75"
        /></a>
      </li>
    </ul>
  </div>
</div>
